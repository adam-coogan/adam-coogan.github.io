(self.webpackChunkadam_coogan_github_io=self.webpackChunkadam_coogan_github_io||[]).push([[519],{2539:function(e,t,a){"use strict";a.r(t);var n=a(9756),r=a(7294),i=a(1676),l=a(2109),s=a(9),o=a(8220),c=a(9902),u=a(4484),m=a(1644),d=["ctxName","draw"],f=(0,c.gL)(4),h=Math.random()-.5,p=Math.random()-.5,g=s.ZP.button.withConfig({displayName:"lensing__Button",componentId:"mnrfrr-0"})(["background-color:",";border-color:",";color:",";margin:0.2em;padding:0.5em 1em;border:2px solid;border-radius:4px;&:hover{background-color:#a6acb1;border-color:#ffffff;color:#ffffff;}&:active{background-color:#6c757d;border-color:#ffffff;color:#ffffff;}"],(function(e){return e.selected?"#6c757d":"#ffffff"}),(function(e){return e.selected?"#ffffff":"#6c757d"}),(function(e){return e.selected?"#ffffff":"#6c757d"})),_=function(e){var t=e.ctxName,a=e.draw,i=(0,n.Z)(e,d),l=function(e,t){var a=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n=a.current.getContext(e);n||console.log("no "+e+"!"),t(n)}),[t]),a}(t,a);return r.createElement("canvas",Object.assign({ref:l},i))},E=function(e){var t=e.label,a=e.value,n=e.set,i=e.min,s=e.max,o=e.description,c=o?r.createElement(r.Fragment,null,r.createElement("label",{style:{flex:2,margin:"0.2rem"},"data-tip":!0,"data-for":o},t),r.createElement(l.Z,{id:o},o)," "):r.createElement("label",{style:{flex:2,margin:"0.2rem"}},t);return r.createElement("div",{style:{display:"flex",alignItems:"center"}},c,r.createElement("input",{style:{flex:2.5,margin:"0.2rem"},type:"range",min:i,max:s,step:.001,value:a,onChange:function(e){return n(parseFloat(e.target.value))}}))},v=function(e){var t=e.x,a=e.y,n=e.phiDeg,i=e.q,l=e.index,s=e.r_e,o=e.setX,c=e.setY,u=e.setPhiDeg,m=e.setQ,d=e.setIndex,f=e.setRe;return r.createElement("div",null,r.createElement("h2",null,"Source parameters"),r.createElement(E,{label:"Horizontal position",value:t,set:o,min:-2.5,max:2.5}),r.createElement(E,{label:"Vertical position",value:a,set:c,min:-2.5,max:2.5}),r.createElement(E,{label:"Orientation",value:n,set:u,min:-180,max:180,description:"Orientation of source relative to x-axis"}),r.createElement(E,{label:"Ellipticity",value:i,set:m,min:.15,max:.9999,description:"Controls whether source is circular (q=1) or elliptical (q=0)"}),r.createElement(E,{label:"Sharpness",value:l,set:d,min:.5,max:5,description:"Higher values cause source brightness to decrease sharply with radius"}),r.createElement(E,{label:"Size",value:s,set:f,min:1e-4,max:10,description:"Sets the size of the source"}))},x=function(e){var t=e.phiDeg,a=e.q,n=e.r_ein,i=e.lensLightScale,l=e.setPhiDeg,s=e.setQ,o=e.setRein,c=e.setLensLightScale;return r.createElement("div",null,r.createElement("h2",null,"Lens parameters"),r.createElement(E,{label:"Orientation",value:t,set:l,min:-180,max:180,description:"Orientation of lens relative to x-axis"}),r.createElement(E,{label:"Ellipticity",value:a,set:s,min:.15,max:.9999,description:"Controls whether lens is circular (q=1) or elliptical (q=0)"}),r.createElement(E,{label:"Einstein radius",value:n,set:o,min:1e-4,max:2.5,description:"Sets the size of the lens"}),r.createElement(g,{selected:60===i,onClick:function(){return c(0===i?60:0)}},0===i?"Turn on lens light":"Turn off lens light"))},b=function(e){var t=e.gamma_1,a=e.gamma_2,n=e.setGamma_1,i=e.setGamma_2;return r.createElement("div",null,r.createElement("h2",null,"External shear parameters"),r.createElement(E,{label:"Horizontal component",value:t,set:n,min:-.05,max:.05,description:"Horizontal component of distortions from large-scale structure"}),r.createElement(E,{label:"Vertical component",value:a,set:i,min:-.05,max:.05,description:"Vertical component of distortions from large-scale structure"}))},y=function(e){var t=e.x,a=e.y,n=e.M_200c,i=e.setX,l=e.setY,s=e.setM200c;return r.createElement("div",null,r.createElement("h2",null,"Subhalo parameters"),r.createElement(E,{label:"Horizontal position",value:t,set:i,min:-2.5,max:2.5}),r.createElement(E,{label:"Vertical position",value:a,set:l,min:-2.5,max:2.5}),r.createElement(E,{label:"Mass",value:Math.log10(n),set:function(e){return s(Math.pow(10,e))},min:5,max:10.5,description:"The mass is that of a sphere centered on the subhalo in which the average density is 200 times rho_cr"}))},w=function(e){var t=e.label,a=e.id,n=e.resolution,i=e.setRes,s=e.activeID,o=e.setActiveID,c=e.description;return r.createElement(r.Fragment,null,r.createElement(g,{id:a,selected:a===s,onClick:function(){o(a),i(n)},"data-tip":!0,"data-for":a},t),r.createElement(l.Z,{id:a},c))},S=function(e){var t=e.sigma_n,a=e.setSigmaN,n=e.setRes,i=e.resampleNoise,l=(0,r.useState)("euclid"),s=l[0],o=l[1];return r.createElement("div",null,r.createElement("h2",null,"Telescope"),r.createElement(E,{label:"Noise level",value:t,set:a,min:0,max:3,description:"Scale of telescope noise level"}),r.createElement(g,{onClick:function(){return i()}},"Resample noise"),r.createElement("div",null,r.createElement(w,{label:"ELT",id:"elt",resolution:.012,setRes:n,activeID:s,setActiveID:o,description:"Extremely Large Telescope, 0.004-0.012'' pixel size"}),r.createElement(w,{label:"JWST",id:"jwst",resolution:.031,setRes:n,activeID:s,setActiveID:o,description:"James Webb Space Telescope, 0.031'' pixel size"}),r.createElement(w,{label:"Hubble Space Telescope",id:"hst",resolution:.05,setRes:n,activeID:s,setActiveID:o,description:"0.05'' pixel size"}),r.createElement(w,{label:"Euclid",id:"euclid",resolution:.1,setRes:n,activeID:s,setActiveID:o,description:"0.1'' pixel size"}),r.createElement(w,{label:"Rubin Observatory",id:"rubin",resolution:.7,setRes:n,activeID:s,setActiveID:o,description:"0.7'' seeing"})))},R=function(e,t){return Uint8Array.from({length:e},(function(){return Math.floor(256*(Math.max(-t,Math.min(t,(0,m.Bu)()))+t)/(2*t))}))},I=function(e,t,a){return Math.min(e,Math.ceil(2*t/a))};t.default=function(){var e,t=(0,r.useState)(.05),a=t[0],n=t[1],s=(0,r.useState)(.1),m=s[0],d=s[1],g=(0,r.useState)(40.107),E=g[0],w=g[1],M=(0,r.useState)(.5),D=M[0],T=M[1],A=(0,r.useState)(4),F=A[0],N=A[1],P=(0,r.useState)(5),L=P[0],z=P[1],C=(0,r.useState)(57.296),k=C[0],q=C[1],H=(0,r.useState)(.75),O=H[0],G=H[1],Z=(0,r.useState)(1.5),X=Z[0],J=Z[1],U=(0,r.useState)(60),B=U[0],Q=U[1],V=(0,r.useState)(.007),Y=V[0],j=V[1],K=(0,r.useState)(.01),W=K[0],$=K[1],ee=(0,r.useState)(-1.1),te=ee[0],ae=ee[1],ne=(0,r.useState)(-1.1),re=ne[0],ie=ne[1],le=(0,r.useState)(1e10),se=le[0],oe=le[1],ce=(0,r.useState)(.1),ue=ce[0],me=ce[1],de=(0,r.useState)(.5),fe=de[0],he=de[1],pe=0===B?23:60,ge=pe,_e=400,Ee=I(_e,2.5,ue),ve=Ee*ue/2,xe=4*Ee,be=(0,r.useState)(R(Math.pow(Ee,2),5)),ye=be[0],we=be[1],Se=(0,u.L)(se),Re=Se.rho_s,Ie=Se.r_s;return r.createElement(i.Z,null,r.createElement("div",{style:{backgroundColor:"#FFFFFF",minHeight:"94vh"}},r.createElement("div",{style:{justifyContent:"center",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:_e,display:"flex",flexDirection:"column",alignItems:"left",padding:"0.5rem",paddingRight:"5rem"}},r.createElement("div",null,r.createElement("h2",{"data-tip":!0,"data-for":"sourceHeaderTT"},"Source"),r.createElement(l.Z,{id:"sourceHeaderTT"},"Source galaxy with no lensing"),r.createElement(_,{ctxName:"webgl",draw:function(e){var t=o.EK(e,[c.Jt,c.AZ]);e.useProgram(t.program),o.Lo(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height);var n=o.qX(e,{a_position:{size:2,data:[-1,-1,1,-1,-1,1,-1,1,1,1,1,-1]}});o.o8(e,t,n);var r={u_range:ve,u_x_s:a,u_y_s:m,u_phi_s:E*Math.PI/180,u_q_s:D,u_index:F,u_r_e:L,u_I_e:.05,u_low_flux:-3,u_high_flux:pe};o.N9(t,r),o.y0(e,n)},width:_e,height:_e,style:{width:_e,height:_e}})),r.createElement(v,{x:a,y:m,phiDeg:E,q:D,index:F,r_e:L,setX:n,setY:d,setPhiDeg:w,setQ:T,setIndex:N,setRe:z}),r.createElement(S,{sigma_n:fe,setSigmaN:he,setRes:function(e){me(e);var t=I(_e,2.5,e);we(R(Math.pow(t,2),5))},resampleNoise:function(){return we(R(Math.pow(Ee,2),5))}})),r.createElement("div",{style:{width:_e,display:"flex",flexDirection:"column",alignItems:"left",padding:"0.5rem",paddingLeft:"5rem"}},r.createElement("div",null,r.createElement("h2",{"data-tip":!0,"data-for":"obsHeaderTT"},"Observation"),r.createElement(l.Z,{id:"obsHeaderTT"},"Observation of lensed galaxy seen by telescope"),r.createElement("div",{style:{position:"relative",width:_e,height:_e}},r.createElement(_,{ctxName:"webgl",draw:function(e){var t=o.EK(e,[c.Jt,c.a0]),n=o.EK(e,[c.Jt,f]),r=o.qX(e,{a_position:{size:2,data:[-1,-1,1,-1,-1,1,-1,1,1,1,1,-1]}});o.o8(e,t,r),e.useProgram(t.program);var i={u_x_s:a,u_y_s:m,u_phi_s:E*Math.PI/180,u_q_s:D,u_index:F,u_r_e:L,u_I_e:.05,u_x_l:0,u_y_l:0,u_phi_l:k*Math.PI/180,u_q_l:O,u_r_ein:X,u_lens_light_scale:B,u_gamma_1:Y,u_gamma_2:W,u_x_sh:Array.from({length:50},(function(){return te+h})),u_y_sh:Array.from({length:50},(function(){return re+p})),u_rho_s:new Array(50).fill(Re),u_r_s:new Array(50).fill(Ie),u_tau:new Array(50).fill(6),u_range:ve,u_max_flux:ge};o.N9(t,i),console.assert(e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE,"framebuffer is not ready to display");var l=o.pL(e,[{min:e.NEAREST,mag:e.NEAREST,wrap:e.CLAMP_TO_EDGE}],xe,xe);o.GG(e,l),o.y0(e,r),o.GG(e,null),e.viewport(0,0,Ee,Ee),e.useProgram(n.program);var s=o.cU(e,{format:e.LUMINANCE,min:e.NEAREST,mag:e.NEAREST,wrap:e.CLAMP_TO_EDGE,width:Ee,height:Ee,src:ye}),u={u_n_pix_fine:xe,u_n_pix:Ee,u_noise_range:5,u_sigma_n:fe,u_max_flux:ge,u_low_flux:-3,u_high_flux:pe,u_flux_tex:l.attachments[0],u_noise_tex:s};o.N9(n,u),o.y0(e,r)},width:Ee,height:Ee,style:{position:"absolute",left:"0px",top:"0px",width:_e,height:_e,imageRendering:"pixelated",zIndex:1}}),r.createElement(_,{ctxName:"2d",draw:function(e){var t=e.canvas.width/Ee;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.strokeStyle="#FF0000",e.beginPath(),e.ellipse(0*t/ue,-0*t/ue,X/O/ue*t,X*O/ue*t,-k*Math.PI/180,0,2*Math.PI),e.stroke(),e.beginPath(),e.arc(te*t/ue,-re*t/ue,3,0,2*Math.PI,!1),e.fillStyle="#FF0000",e.fill(),e.restore()},width:_e,height:_e,style:(e={position:"absolute",left:"0px",top:"0px",width:_e,height:_e,imageRendering:"-moz-crisp-edges"},e.imageRendering="-webkit-crisp-edges",e.imageRendering="pixelated",e.imageRendering="crisp-edges",e.zIndex=2,e)}))),r.createElement(y,{x:te,y:re,M_200c:se,setX:ae,setY:ie,setM200c:oe}),r.createElement(x,{phiDeg:k,q:O,r_ein:X,lensLightScale:B,setPhiDeg:q,setQ:G,setRein:J,setLensLightScale:Q}),r.createElement(b,{gamma_1:Y,gamma_2:W,setGamma_1:j,setGamma_2:$})))))}}}]);
//# sourceMappingURL=component---src-pages-lensing-tsx-e8fe80e1c0f146517391.js.map