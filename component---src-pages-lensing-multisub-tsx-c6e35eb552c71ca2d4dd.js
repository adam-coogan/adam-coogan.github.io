(self.webpackChunkadam_coogan_github_io=self.webpackChunkadam_coogan_github_io||[]).push([[748],{3229:function(e,t,a){"use strict";a.r(t);var n=a(9756),r=a(7294),i=a(1676),l=a(2109),s=a(9),o=a(8220),c=a(9902),u=a(4484),m=a(1644),d=["ctxName","draw"],f=(0,c.gL)(4),h=2.5,_=50,g=1e9,p=1e10,E=function(e){return{x_shs:Array.from({length:e},(function(){return 5*(Math.random()-.5)})),y_shs:Array.from({length:e},(function(){return 5*(Math.random()-.5)})),M_200cs:Array.from({length:e},(function(){var e=Math.random();return Math.pow(-(e*p-e*g-p)/(p*g),-1)}))}},v=s.ZP.button.withConfig({displayName:"lensing-multisub__Button",componentId:"sc-1gm82ao-0"})(["background-color:",";border-color:",";color:",";margin:0.2em;padding:0.5em 1em;border:2px solid;border-radius:4px;&:hover{background-color:#a6acb1;border-color:#ffffff;color:#ffffff;}&:active{background-color:#6c757d;border-color:#ffffff;color:#ffffff;}"],(function(e){return e.selected?"#6c757d":"#ffffff"}),(function(e){return e.selected?"#ffffff":"#6c757d"}),(function(e){return e.selected?"#ffffff":"#6c757d"})),x=function(e){var t=e.ctxName,a=e.draw,i=(0,n.Z)(e,d),l=function(e,t){var a=(0,r.useRef)(null);return(0,r.useEffect)((function(){var n=a.current.getContext(e);n||console.log("no "+e+"!"),t(n)}),[t]),a}(t,a);return r.createElement("canvas",Object.assign({ref:l},i))},b=function(e){var t=e.label,a=e.value,n=e.set,i=e.min,s=e.max,o=e.description,c=o?r.createElement(r.Fragment,null,r.createElement("label",{style:{flex:2,margin:"0.2rem"},"data-tip":!0,"data-for":o},t),r.createElement(l.Z,{id:o},o)," "):r.createElement("label",{style:{flex:2,margin:"0.2rem"}},t);return r.createElement("div",{style:{display:"flex",alignItems:"center"}},c,r.createElement("input",{style:{flex:2.5,margin:"0.2rem"},type:"range",min:i,max:s,step:.001,value:a,onChange:function(e){return n(parseFloat(e.target.value))}}))},y=function(e){var t=e.x,a=e.y,n=e.phiDeg,i=e.q,l=e.index,s=e.r_e,o=e.setX,c=e.setY,u=e.setPhiDeg,m=e.setQ,d=e.setIndex,f=e.setRe;return r.createElement("div",null,r.createElement("h2",null,"Source parameters"),r.createElement(b,{label:"Horizontal position",value:t,set:o,min:-2.5,max:h}),r.createElement(b,{label:"Vertical position",value:a,set:c,min:-2.5,max:h}),r.createElement(b,{label:"Orientation",value:n,set:u,min:-180,max:180,description:"Orientation of source relative to x-axis"}),r.createElement(b,{label:"Ellipticity",value:i,set:m,min:.15,max:.9999,description:"Controls whether source is circular (q=1) or elliptical (q=0)"}),r.createElement(b,{label:"Sharpness",value:l,set:d,min:.5,max:5,description:"Higher values cause source brightness to decrease sharply with radius"}),r.createElement(b,{label:"Size",value:s,set:f,min:1e-4,max:10,description:"Sets the size of the source"}))},w=function(e){var t=e.phiDeg,a=e.q,n=e.r_ein,i=e.lensLightScale,l=e.setPhiDeg,s=e.setQ,o=e.setRein,c=e.setLensLightScale;return r.createElement("div",null,r.createElement("h2",null,"Lens parameters"),r.createElement(b,{label:"Orientation",value:t,set:l,min:-180,max:180,description:"Orientation of lens relative to x-axis"}),r.createElement(b,{label:"Ellipticity",value:a,set:s,min:.15,max:.9999,description:"Controls whether lens is circular (q=1) or elliptical (q=0)"}),r.createElement(b,{label:"Einstein radius",value:n,set:o,min:1e-4,max:h,description:"Sets the size of the lens"}),r.createElement(v,{selected:60===i,onClick:function(){return c(0===i?60:0)}},0===i?"Turn on lens light":"Turn off lens light"))},S=function(e){var t=e.gamma_1,a=e.gamma_2,n=e.setGamma_1,i=e.setGamma_2;return r.createElement("div",null,r.createElement("h2",null,"External shear parameters"),r.createElement(b,{label:"Horizontal component",value:t,set:n,min:-.05,max:.05,description:"Horizontal component of distortions from large-scale structure"}),r.createElement(b,{label:"Vertical component",value:a,set:i,min:-.05,max:.05,description:"Vertical component of distortions from large-scale structure"}))},R=function(e){var t=e.resampleSHs;return r.createElement("div",null,r.createElement("h2",null,"Subhalo parameters"),r.createElement(v,{onClick:function(){return t()}},"Resample subhalos"))},I=function(e){var t=e.label,a=e.id,n=e.resolution,i=e.setRes,s=e.activeID,o=e.setActiveID,c=e.description;return r.createElement(r.Fragment,null,r.createElement(v,{id:a,selected:a===s,onClick:function(){o(a),i(n)},"data-tip":!0,"data-for":a},t),r.createElement(l.Z,{id:a},c))},M=function(e){var t=e.sigma_n,a=e.setSigmaN,n=e.setRes,i=e.resampleNoise,l=(0,r.useState)("euclid"),s=l[0],o=l[1];return r.createElement("div",null,r.createElement("h2",null,"Telescope"),r.createElement(b,{label:"Noise level",value:t,set:a,min:0,max:3,description:"Scale of telescope noise level"}),r.createElement(v,{onClick:function(){return i()}},"Resample noise"),r.createElement("div",null,r.createElement(I,{label:"ELT",id:"elt",resolution:.012,setRes:n,activeID:s,setActiveID:o,description:"Extremely Large Telescope, 0.004-0.012'' pixel size"}),r.createElement(I,{label:"JWST",id:"jwst",resolution:.031,setRes:n,activeID:s,setActiveID:o,description:"James Webb Space Telescope, 0.031'' pixel size"}),r.createElement(I,{label:"Hubble Space Telescope",id:"hst",resolution:.05,setRes:n,activeID:s,setActiveID:o,description:"0.05'' pixel size"}),r.createElement(I,{label:"Euclid",id:"euclid",resolution:.1,setRes:n,activeID:s,setActiveID:o,description:"0.1'' pixel size"}),r.createElement(I,{label:"Rubin Observatory",id:"rubin",resolution:.7,setRes:n,activeID:s,setActiveID:o,description:"0.7'' seeing"})))},D=function(e,t){return Uint8Array.from({length:e},(function(){return Math.floor(256*(Math.max(-t,Math.min(t,(0,m.Bu)()))+t)/(2*t))}))},A=function(e,t,a){return Math.min(e,Math.ceil(2*t/a))};t.default=function(){for(var e,t=(0,r.useState)(.05),a=t[0],n=t[1],s=(0,r.useState)(.1),m=s[0],d=s[1],g=(0,r.useState)(40.107),p=g[0],v=g[1],b=(0,r.useState)(.5),I=b[0],T=b[1],F=(0,r.useState)(4),N=F[0],P=F[1],L=(0,r.useState)(5),C=L[0],k=L[1],z=(0,r.useState)(57.296),q=z[0],H=z[1],O=(0,r.useState)(.75),G=O[0],Z=O[1],J=(0,r.useState)(1.5),U=J[0],B=J[1],Q=(0,r.useState)(60),X=Q[0],j=Q[1],K=(0,r.useState)(.007),V=K[0],W=K[1],Y=(0,r.useState)(.01),$=Y[0],ee=Y[1],te=(0,r.useState)(E(_)),ae=te[0],ne=te[1],re=(0,r.useState)(.1),ie=re[0],le=re[1],se=(0,r.useState)(.5),oe=se[0],ce=se[1],ue=0===X?23:60,me=ue,de=400,fe=A(de,h,ie),he=fe*ie/2,_e=4*fe,ge=(0,r.useState)(D(Math.pow(fe,2),5)),pe=ge[0],Ee=ge[1],ve=new Array(_),xe=new Array(_),be=0;be<_;be++){var ye=(0,u.L)(ae.M_200cs[be]),we=ye.rho_s,Se=ye.r_s;ve[be]=we,xe[be]=Se}return r.createElement(i.Z,null,r.createElement("div",{style:{backgroundColor:"#FFFFFF",minHeight:"94vh"}},r.createElement("div",{style:{justifyContent:"center",display:"flex",flexDirection:"row"}},r.createElement("div",{style:{width:de,display:"flex",flexDirection:"column",alignItems:"left",padding:"0.5rem",paddingRight:"5rem"}},r.createElement("div",null,r.createElement("h2",{"data-tip":!0,"data-for":"sourceHeaderTT"},"Source"),r.createElement(l.Z,{id:"sourceHeaderTT"},"Source galaxy with no lensing"),r.createElement(x,{ctxName:"webgl",draw:function(e){var t=o.EK(e,[c.Jt,c.AZ]);e.useProgram(t.program),o.Lo(e.canvas),e.viewport(0,0,e.canvas.width,e.canvas.height);var n=o.qX(e,{a_position:{size:2,data:[-1,-1,1,-1,-1,1,-1,1,1,1,1,-1]}});o.o8(e,t,n);var r={u_range:he,u_x_s:a,u_y_s:m,u_phi_s:p*Math.PI/180,u_q_s:I,u_index:N,u_r_e:C,u_I_e:.05,u_low_flux:-3,u_high_flux:ue};o.N9(t,r),o.y0(e,n)},width:de,height:de,style:{width:de,height:de}})),r.createElement(y,{x:a,y:m,phiDeg:p,q:I,index:N,r_e:C,setX:n,setY:d,setPhiDeg:v,setQ:T,setIndex:P,setRe:k}),r.createElement(M,{sigma_n:oe,setSigmaN:ce,setRes:function(e){le(e);var t=A(de,h,e);Ee(D(Math.pow(t,2),5))},resampleNoise:function(){return Ee(D(Math.pow(fe,2),5))}})),r.createElement("div",{style:{width:de,display:"flex",flexDirection:"column",alignItems:"left",padding:"0.5rem",paddingLeft:"5rem"}},r.createElement("div",null,r.createElement("h2",{"data-tip":!0,"data-for":"obsHeaderTT"},"Observation"),r.createElement(l.Z,{id:"obsHeaderTT"},"Observation of lensed galaxy seen by telescope"),r.createElement("div",{style:{position:"relative",width:de,height:de}},r.createElement(x,{ctxName:"webgl",draw:function(e){var t=o.EK(e,[c.Jt,c.a0]),n=o.EK(e,[c.Jt,f]),r=o.qX(e,{a_position:{size:2,data:[-1,-1,1,-1,-1,1,-1,1,1,1,1,-1]}});o.o8(e,t,r),e.useProgram(t.program);var i={u_x_s:a,u_y_s:m,u_phi_s:p*Math.PI/180,u_q_s:I,u_index:N,u_r_e:C,u_I_e:.05,u_x_l:0,u_y_l:0,u_phi_l:q*Math.PI/180,u_q_l:G,u_r_ein:U,u_lens_light_scale:X,u_gamma_1:V,u_gamma_2:$,u_x_sh:ae.x_shs,u_y_sh:ae.y_shs,u_rho_s:ve,u_r_s:xe,u_tau:new Array(_).fill(6),u_range:he,u_max_flux:me};o.N9(t,i),console.assert(e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE,"framebuffer is not ready to display");var l=o.pL(e,[{min:e.NEAREST,mag:e.NEAREST,wrap:e.CLAMP_TO_EDGE}],_e,_e);o.GG(e,l),o.y0(e,r),o.GG(e,null),e.viewport(0,0,fe,fe),e.useProgram(n.program);var s=o.cU(e,{format:e.LUMINANCE,min:e.NEAREST,mag:e.NEAREST,wrap:e.CLAMP_TO_EDGE,width:fe,height:fe,src:pe}),u={u_n_pix_fine:_e,u_n_pix:fe,u_noise_range:5,u_sigma_n:oe,u_max_flux:me,u_low_flux:-3,u_high_flux:ue,u_flux_tex:l.attachments[0],u_noise_tex:s};o.N9(n,u),o.y0(e,r)},width:fe,height:fe,style:{position:"absolute",left:"0px",top:"0px",width:de,height:de,imageRendering:"pixelated",zIndex:1}}),r.createElement(x,{ctxName:"2d",draw:function(e){var t=e.canvas.width/fe;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.strokeStyle="#FF0000",e.beginPath(),e.ellipse(0*t/ie,-0*t/ie,U/G/ie*t,U*G/ie*t,-q*Math.PI/180,0,2*Math.PI),e.stroke();for(var a=0;a<_;a++)e.beginPath(),e.arc(ae.x_shs[a]*t/ie,-ae.y_shs[a]*t/ie,3,0,2*Math.PI,!1),e.fillStyle="#FF0000",e.fill();e.restore()},width:de,height:de,style:(e={position:"absolute",left:"0px",top:"0px",width:de,height:de,imageRendering:"-moz-crisp-edges"},e.imageRendering="-webkit-crisp-edges",e.imageRendering="pixelated",e.imageRendering="crisp-edges",e.zIndex=2,e)}))),r.createElement(R,{resampleSHs:function(){return ne(E(_))}}),r.createElement(w,{phiDeg:q,q:G,r_ein:U,lensLightScale:X,setPhiDeg:H,setQ:Z,setRein:B,setLensLightScale:j}),r.createElement(S,{gamma_1:V,gamma_2:$,setGamma_1:W,setGamma_2:ee})))))}}}]);
//# sourceMappingURL=component---src-pages-lensing-multisub-tsx-c6e35eb552c71ca2d4dd.js.map